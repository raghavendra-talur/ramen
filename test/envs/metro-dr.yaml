# SPDX-FileCopyrightText: The RamenDR authors
# SPDX-License-Identifier: Apache-2.0

# Enviroment for testing Metro-DR.
---
name: "mdr"

ramen:
  hub: hub
  clusters: [dr1, dr2, storage]
  topology: metro-dr

templates:
  - name: "dr-cluster"
    driver: kvm2
    container_runtime: containerd
    network: default
    memory: "6g"
    workers:
      - addons:
          - name: ocm-cluster
            args: ["$name", "hub"]
      - addons:
          - name: cert-manager
          - name: csi-addons
          - name: olm
          - name: minio
          - name: velero
          - name: volsync
  - name: "hub-cluster"
    driver: kvm2
    container_runtime: containerd
    network: default
    memory: "4g"
    workers:
      - addons:
          - name: ocm-hub
          - name: ocm-controller
          - name: cert-manager
          - name: olm
  - name: "storage-cluster"
    driver: kvm2
    container_runtime: containerd
    network: default
    memory: "6g"
    extra_disks: 1
    disk_size: "50g"
    workers:
      - addons:
          - name: rook-operator
          - name: rook-cluster
          - name: rook-pool
          - name: rook-toolbox
      - addons:
          - name: csi-addons
          - name: olm
          - name: minio
          - name: volsync
          - name: velero
      - addons:
          - name: ocm-cluster
            args: ["$name", "hub"]

profiles:
  - name: "dr1"
    template: "dr-cluster"
  - name: "dr2"
    template: "dr-cluster"
  - name: "storage"
    template: "storage-cluster"
  - name: "hub"
    template: "hub-cluster"